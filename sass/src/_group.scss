
@mixin make-group-default() {
	// reset ul style & margin & padding
	list-style: none;
	margin: 0;
	padding: 0;
	display: inline-block; 
}

@mixin make-group-radius($radius, $vertical) {
	@if $vertical {
		:first-child {
			border-top-left-radius: $radius;
			border-top-right-radius: $radius;
		}
		:last-child {
			border-bottom-left-radius: $radius;
			border-bottom-right-radius: $radius;
		}
	}
	@else {	
		:first-child {
			border-top-left-radius: $radius;
			border-bottom-left-radius: $radius;
		}
		:last-child {
			border-top-right-radius: $radius;
			border-bottom-right-radius: $radius;
		}
	}
}

@mixin make-group-item-zindex($vertical) { // 需要使用z-index的自行调用
	@if $vertical {
		margin-top: -1px ;
		&.disabled {
			margin-top: 0;
			border-top-width: 0;
			z-index: 0;
		};
	} @else {
		margin-left: -1px ;
		&.disabled {
			margin-left: 0;
			border-left-width: 0;
		};
	}
	&:active {
		z-index: 4;
	}
	&.selected {
		z-index: 6;
	}
}

@mixin make-group() {
	//@VAR group
	$group-divider-bg-color				: #DDD !default;
	$group-title-color					: #666 !default;

	$group-arrow-bd-color				: $default-bd-color !default;

	$group-item-active-bg-color			: $default-active-bg-color !default;
	$group-item-hover-bg-color			: $default-hover-bg-color !default;
	$group-item-disabled-bg-color		: $default-disabled-bg-color !default;

	$group-active-cursor				: $default-active-cursor !default;
	$group-base-zindex					: $default-base-zindex !default;
	//!VAR group
	
	// 基础部分
	.group-col,
	.group-row {
		@include make-group-default;
		> .group-item {
			@include make-size-default;
			white-space: nowrap;
			user-select: none;
			cursor: $group-active-cursor;
			&:focus,
			&:hover {
				background-color: $group-item-hover-bg-color;
			}

			// &:active, // 树状会影响到父级
			&.active {
				background-color: $group-item-active-bg-color;
			}

			&.disabled {
				color: darken($group-item-disabled-bg-color, 30);
				background-color: transparent;
			}
		}
	}

	.group-col { // 列分组
		> .group-item {
			display: block;
		}
	}

	.group-row { // 行分组
		@include clearfix;
		> .group-item {
			float: left;
		}
	}

	// 扩展部分
	.group-col { // 列模式增加 标题 和 分割线
		> .group-title { // 标题
			@include make-size-default;
			display: block;
			cursor: default;
			color: $group-title-color;
		}
		> .group-divider { // 分割线
			background-color: $group-divider-bg-color;
			height: 1px;
			margin: 0.5em 0;
			display: block;
		}
	}

	.group-row { // 列模式增加 标题 和 分割线
		> .group-title,
		> .group-divider { // 标题
			display: none;
		}
	}

	// 子组件
	.group-row  > .group-item.has-sub,
	.group-col  > .group-item.has-sub,
	{
		position: relative;
		> .group-col {
			display: none;
			position: absolute;
			top: 0;
			left: 100%;
			margin-left: -5px;
			z-index: $group-base-zindex;
		}
		&:hover {
			> .group-col {
				display: block;
			}
		}
		&.disabled {
			> .group-col {
				display: none;
			}
		}
		&::after {
			border: .3em solid transparent;
			border-top-color: darken($group-arrow-bd-color, 20);  // 右箭头
			position: absolute;
			top: 40%;
			right: 5px;
			content: '';
			transform: rotate(-90deg);
		}
		&.disabled {
			&::after {
				border-top-color: darken($group-item-disabled-bg-color, 20);
			}
		}
	}
	
	// 行模式
	.group-row  > .group-item.has-sub {
		>.group-col {
			top: 100%;
			left: 0;
			margin-left: 0;
			min-width: 100%;
			text-align: left;
		}
		&::after {  // 下箭头
			transform: rotate(0);
			top: 45%;
		}
	}

	// group + radio
	// group + check 组合
	.group-col {
		>.group-item.radio {
			.radio-text::before,
			.radio-text::after {
				left: 1.5em;
			}
		}
		>.group-item.check {
			.check-text::before,
			.check-text::after {
				left: 1.5em;
			}
		}
		>.group-item {
			> .check,
			> .radio {
				display: block;
				padding: 0;
			}
		}
	}
}
